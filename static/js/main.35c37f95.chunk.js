(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){},43:function(e,t,a){e.exports=a(86)},48:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},69:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(23),r=a.n(s),l=(a(48),a(4)),i=a(5),c=a(7),u=a(6),m=a(3),h=a(8),d=a(16),p=a(17),b=a(33),v=a.n(b).a.initializeApp({apiKey:"AIzaSyCBd78yY9bngvyXh4befoXMiK-b-mnIALc",authDomain:"simple-studio-2b931.firebaseapp.com",databaseURL:"https://simple-studio-2b931.firebaseio.com",projectId:"simple-studio-2b931",storageBucket:"simple-studio-2b931.appspot.com",messagingSenderId:"887864254461",appId:"1:887864254461:web:266ded447123e296"}),f=a(9),g=a.n(f),E=a(19),y=(a(59),function(e){function t(e){var a;Object(l.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e));var n=v.auth().currentUser;return a.state={id:a.props.rowID,instrument:"",tone:[],activeCol:-1,collaborators:a.props.collaborators,userID:n.uid},a._updateTile=a._updateTile.bind(Object(m.a)(a)),a._getClassNames=a._getClassNames.bind(Object(m.a)(a)),a.lightCol=a.lightCol.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.firestore().collection("row").doc(this.state.id).onSnapshot(function(t){e.setState({instrument:t.data().instrument,tone:t.data().tone})})}},{key:"buildRow",value:function(){for(var e=[],t=0;t<16;t++)e.push(o.a.createElement("div",{onClick:this.state.collaborators.includes(this.state.userID)?this._updateTile:"",id:t,key:t,className:this._getClassNames(t)}));return e}},{key:"_getClassNames",value:function(e){var t="row-tile";return this.state.tone[e]&&(t+=" selected"),e===this.state.activeCol&&(t+=" active-tile"),t}},{key:"_updateTile",value:function(e){var t=this.state.tone.slice();t[e.target.id]=!t[e.target.id],v.firestore().collection("row").doc(this.state.id).update({tone:t})}},{key:"lightCol",value:function(e){this.setState({activeCol:e})}},{key:"render",value:function(){return o.a.createElement("div",{className:"row-container"},o.a.createElement("div",{className:"row-title"}," ",this.state.instrument," "),this.buildRow(),this.state.instrument?o.a.createElement(w,{tone:this.state.tone,instrument:this.state.instrument,activate:this.lightCol}):"")}}]),t}(n.Component)),w=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={loop:"",play:[]},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="/SimpleStudio/assets/"+this.props.instrument+".mp3",a=new g.a.Players(Object(E.a)({},this.props.instrument,t),{volume:-5}).toMaster(),n=new g.a.Sequence(function(t,n){e.props.tone[n]&&a.get(e.props.instrument).start(t),g.a.Draw.schedule(function(){e.props.activate(n)},t)},[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],"16n");n.start(0),this.setState({loop:n})}},{key:"render",value:function(){return o.a.createElement("div",null)}}]),t}(n.Component),N=y,j=a(28),O=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={id:a.props.synthID,loop:"",tones:a.props.rows,noteArray:[],scale:"",octave:"",root:"",chorus:"",chorusAmount:0,reverb:"",reverbAmount:0,delay:"",delayAmount:0,vol:"",volAmount:-12},a._updateTile=a._updateTile.bind(Object(m.a)(a)),a._onScale=a._onScale.bind(Object(m.a)(a)),a._onOctave=a._onOctave.bind(Object(m.a)(a)),a._onRoot=a._onRoot.bind(Object(m.a)(a)),a._handleChorus=a._handleChorus.bind(Object(m.a)(a)),a._handleReverb=a._handleReverb.bind(Object(m.a)(a)),a._handleDelay=a._handleDelay.bind(Object(m.a)(a)),a._handleVol=a._handleVol.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.firestore().collection("synthesiser").doc(this.state.id).onSnapshot(function(t){var a=t.data(),n=a.scale,o=a.root+a.octave;console.log(o),e.setState({noteArray:Object(j.a)(n).map(Object(j.b)(o)).reverse(),tones:[a.row0,a.row1,a.row2,a.row3,a.row4,a.row5,a.row6],scale:a.scale,octave:a.octave,root:a.root})});var t=new g.a.PolySynth(7,g.a.Synth,{oscillator:{type:"sine"},volume:-6}),a=new g.a.PingPongDelay({delayTime:"4n",feedback:.2,wet:0}).toMaster(),n=new g.a.Chorus({frequency:2.5,delayTime:.5,depth:1,feedback:.3,wet:0}).toMaster(),o=new g.a.Freeverb({roomSize:.8,dampening:12e3,wet:0}).toMaster(),s=new g.a.Volume({volume:-12});t.chain(s,n,a,o,g.a.Master);var r=new g.a.Sequence(function(a,n){for(var o=0;o<e.state.tones.length;o++)e.state.tones[o][n]&&t.triggerAttackRelease(e.state.noteArray[o],"16n");g.a.Draw.schedule(function(){e.lightCol(n)},a)},[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],"16n");r.start(0),this.setState({loop:r,chorus:n,reverb:o,delay:a,vol:s})}},{key:"_handleChorus",value:function(e){this.setState({chorusAmount:e.target.value}),this.state.chorus.wet.value=this.state.chorusAmount/100}},{key:"_handleReverb",value:function(e){this.setState({reverbAmount:e.target.value}),this.state.reverb.wet.value=this.state.reverbAmount/100}},{key:"_handleDelay",value:function(e){this.setState({delayAmount:e.target.value}),this.state.delay.wet.value=this.state.delayAmount/100}},{key:"_handleVol",value:function(e){console.log(e.target.value),this.setState({volAmount:e.target.value}),this.state.vol.volume.value=this.state.volAmount}},{key:"createSynth",value:function(){for(var e=[],t=0;t<this.state.tones.length;t++){var a=[];a.push(o.a.createElement("div",{className:"row-title"}," ",this.state.noteArray[t]," "));for(var n=0;n<16;n++)a.push(o.a.createElement("div",{onClick:this._updateTile,id:"".concat(t,"rowcol").concat(n),key:n,className:this._getClassNames(n,t)}));e.push(o.a.createElement("div",{className:"row-container"},a))}return e}},{key:"_getClassNames",value:function(e,t){var a="row-tile";return this.state.tones[t][e]&&(a+=" selected"),e===this.state.activeCol&&(a+=" active-tile"),a}},{key:"_updateTile",value:function(e){var t=e.target.id[0],a=e.target.id.slice(e.target.id.indexOf("l")+1),n=this.state.tones.slice();n[t][a]=!n[t][a],v.firestore().collection("synthesiser").doc(this.state.id).update({row0:n[0],row1:n[1],row2:n[2],row3:n[3],row4:n[4],row5:n[5],row6:n[6]})}},{key:"lightCol",value:function(e){this.setState({activeCol:e})}},{key:"_onScale",value:function(e){v.firestore().collection("synthesiser").doc(this.state.id).update({scale:e.target.value})}},{key:"_onOctave",value:function(e){v.firestore().collection("synthesiser").doc(this.state.id).update({octave:e.target.value})}},{key:"_onRoot",value:function(e){v.firestore().collection("synthesiser").doc(this.state.id).update({root:e.target.value})}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"scale-controls-container"},o.a.createElement("div",{className:"scale-controls"},o.a.createElement("label",null,"Choose Root Note"),o.a.createElement("select",{onChange:this._onRoot,value:this.state.root},o.a.createElement("option",{value:"A"},"A"),o.a.createElement("option",{value:"Bb"},"Bb"),o.a.createElement("option",{value:"B"},"B"),o.a.createElement("option",{value:"C"},"C"),o.a.createElement("option",{value:"Db"},"Db"),o.a.createElement("option",{value:"D"},"D"),o.a.createElement("option",{value:"Eb"},"Eb"),o.a.createElement("option",{value:"E"},"E"),o.a.createElement("option",{value:"F"},"F"),o.a.createElement("option",{value:"Gb"},"Gb"),o.a.createElement("option",{value:"G"},"G"))),o.a.createElement("div",{className:"scale-controls"},o.a.createElement("label",null,"Choose Scale"),o.a.createElement("select",{onChange:this._onScale,value:this.state.scale},o.a.createElement("option",{value:"major"},"Major"),o.a.createElement("option",{value:"minor"},"Minor"),o.a.createElement("option",{value:"pentatonic"},"Pentatonic"))),o.a.createElement("div",{className:"scale-controls"},o.a.createElement("label",null,"Choose Octave"),o.a.createElement("select",{onChange:this._onOctave,value:this.state.octave},o.a.createElement("option",{value:"1"},"1"),o.a.createElement("option",{value:"2"},"2"),o.a.createElement("option",{value:"3"},"3"),o.a.createElement("option",{value:"4"},"4"),o.a.createElement("option",{value:"5"},"5"),o.a.createElement("option",{value:"6"},"6")))),o.a.createElement("div",{className:"effects-slider-container"},o.a.createElement("label",null,"Chorus Amount:"),o.a.createElement("input",{type:"range",min:"0",max:"100",value:this.state.chorusAmount,onChange:this._handleChorus,className:"slider"}),o.a.createElement("label",null,"Delay Amount:"),o.a.createElement("input",{type:"range",min:"0",max:"100",value:this.state.delayAmount,onChange:this._handleDelay,className:"slider"})),o.a.createElement("div",{className:"effects-slider-container"},o.a.createElement("label",null,"Reverb Amount:"),o.a.createElement("input",{type:"range",min:"0",max:"50",value:this.state.reverbAmount,onChange:this._handleReverb,className:"slider"}),o.a.createElement("label",null,"Volume Amount:"),o.a.createElement("input",{type:"range",min:"-64",max:"-6",value:this.state.volAmount,onChange:this._handleVol,className:"slider"})),o.a.createElement("div",null,this.createSynth()))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={id:a.props.seqID,name:"",rows:[],isSynth:!1},a.createRows=a.createRows.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.firestore().collection("sequencer").doc(this.state.id).get().then(function(t){t.exists?e.setState({name:t.data().name,rows:t.data().rows,isSynth:!1}):v.firestore().collection("synthesiser").doc(e.state.id).get().then(function(t){var a=t.data();e.setState({name:a.name,rows:[a.row0,a.row1,a.row2,a.row3,a.row4,a.row5,a.row6],isSynth:!0})})})}},{key:"createRows",value:function(){if(this.state.isSynth)return o.a.createElement(O,{synthID:this.state.id,rows:this.state.rows});for(var e=[],t=0;t<this.state.rows.length;t++)e.push(o.a.createElement(N,{key:t,rowID:this.state.rows[t],collaborators:this.props.collaborators}));return e}},{key:"render",value:function(){return o.a.createElement("div",null,this.createRows())}}]),t}(n.Component),k=(a(60),a(37)),C=function(e){function t(e,a){var n;Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e,a))).chatToggle=function(){n.props.shrinkRoom(!n.state.showMenu),n.setState({showMenu:!n.state.showMenu})},n.updateMessage=n.updateMessage.bind(Object(m.a)(n)),n.submitMessage=n.submitMessage.bind(Object(m.a)(n));var o=v.auth().currentUser;return n.state={message:"",messages:[],showMenu:!1,userName:o.displayName,roomID:n.props.roomID},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.database().ref("".concat(this.state.roomID,"/")).on("value",function(t){var a=t.val();null!=a&&e.setState({messages:a})})}},{key:"updateMessage",value:function(e){this.setState({message:e.target.value})}},{key:"submitMessage",value:function(e){e.preventDefault();var t={id:this.state.messages.length,text:this.state.message,user:this.state.userName};v.database().ref("".concat(this.state.roomID,"/")+t.id).set(t),this.setState({message:""})}},{key:"render",value:function(){var e=this.state.messages.map(function(e,t,a){return o.a.createElement("li",{key:e.id},e.user,": ",e.text)}),t=this.state.showMenu?"active":"";return o.a.createElement("div",{className:"chat-bar"},o.a.createElement("span",{class:"chatbar-toggle",onClick:this.chatToggle},o.a.createElement("div",{className:"chat-bar-logo"},"\ud83d\udcac")),o.a.createElement("form",{className:"main-chat ".concat(t),onSubmit:this.submitMessage},o.a.createElement("ol",null,o.a.createElement(k.a,{forceScroll:"true"},e)),o.a.createElement("input",{value:this.state.message,onChange:this.updateMessage,type:"text",placeholder:"Send Message to Room",className:"chat-input"}),o.a.createElement("br",null)))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(l.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e)),g.a.Transport.stop(),g.a.Transport.cancel(),a.state={id:a.props.match.params.room,name:"",sequencers:[],transport:!1,tempo:"",exists:!0,collaborators:[],swing:"",showMenu:!1},a.createSequences=a.createSequences.bind(Object(m.a)(a)),a._playMusic=a._playMusic.bind(Object(m.a)(a)),a._changeTempo=a._changeTempo.bind(Object(m.a)(a)),a._changeSwing=a._changeSwing.bind(Object(m.a)(a)),a.shrinkRoom=a.shrinkRoom.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.firestore().collection("room").doc(this.state.id).get().then(function(t){t.exists?e.setState({name:t.data().name,tempo:t.data().tempo,collaborators:t.data().collaborators,swing:t.data().swing}):e.setState({exists:!1})}),v.firestore().collection("room").doc(this.state.id).onSnapshot(function(t){e.setState({tempo:t.data().tempo,sequencers:t.data().sequencers,swing:t.data().swing})})}},{key:"createSequences",value:function(){for(var e=[],t=0;t<this.state.sequencers.length;t++)e.push(o.a.createElement(S,{key:t,seqID:this.state.sequencers[t],collaborators:this.state.collaborators}));return e}},{key:"_playMusic",value:function(){g.a.Transport.toggle();var e=this.state.transport;this.setState({transport:!e})}},{key:"_changeTempo",value:function(e){var t=this,a=e.target.value;this.setState({tempo:a}),g.a.Transport.bpm.value=this.state.tempo;clearTimeout(this.time),this.time=setTimeout(function(){v.firestore().collection("room").doc(t.state.id).update({tempo:t.state.tempo})},1e3)}},{key:"_changeSwing",value:function(e){var t=this,a=e.target.value;this.setState({swing:a}),g.a.Transport.swing=this.state.swing/100;clearTimeout(this.time),this.time=setTimeout(function(){v.firestore().collection("room").doc(t.state.id).update({swing:t.state.swing})},500)}},{key:"shrinkRoom",value:function(e){this.setState({showMenu:e})}},{key:"render",value:function(){var e=this.state.showMenu?"shrink-room":"";return this.state.exists?o.a.createElement("div",null,o.a.createElement("div",{className:"room-container"},o.a.createElement("div",{className:e},o.a.createElement("h1",{id:"room-title"},this.state.name),o.a.createElement("div",{className:"slidecontainer"},this.state.transport?o.a.createElement("button",{className:"transport",onClick:this._playMusic},"\u25fc"):o.a.createElement("button",{className:"transport",onClick:this._playMusic},"\u25b6"),o.a.createElement("p",{className:"tempo"},"Tempo: ",this.state.tempo," bpm"),o.a.createElement("input",{type:"range",min:"60",max:"180",id:"bpm",value:this.state.tempo,onChange:this._changeTempo,className:"slider"}),o.a.createElement("p",{className:"tempo"},"Swing Amount: ",this.state.swing),o.a.createElement("input",{type:"range",min:"0",max:"100",id:"bpm",value:this.state.swing,onChange:this._changeSwing,className:"slider"})),o.a.createElement("div",{className:"sequence-wrapper"},this.createSequences()))),o.a.createElement(C,{roomID:this.state.id,shrinkRoom:this.shrinkRoom})):o.a.createElement(p.a,{to:"/"})}}]),t}(n.Component),D=(a(69),a(40)),R=(n.Component,a(41)),A=(a(25),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).login=a.login.bind(Object(m.a)(a)),a.handleChange=a.handleChange.bind(Object(m.a)(a)),a.signup=a.signup.bind(Object(m.a)(a)),a.state={email:"",password:"",userName:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(E.a)({},e.target.name,e.target.value))}},{key:"login",value:function(e){e.preventDefault(),v.auth().signInWithEmailAndPassword(this.state.email,this.state.password).then(function(e){console.log()}).catch(function(e){console.log(e)})}},{key:"signup",value:function(e){var t=this;e.preventDefault(),v.auth().createUserWithEmailAndPassword(this.state.email,this.state.password).then(function(e){var a=e.user;a&&a.updateProfile({displayName:t.state.userName}).then(function(){v.firestore().collection("user").doc(a.uid).set({rooms:[]}),console.log(a.displayName)})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return o.a.createElement("div",{className:"background"},o.a.createElement("h1",{className:"title"},"Simple Studio"),o.a.createElement("form",{className:"sign-form"},o.a.createElement("div",null,o.a.createElement("label",{className:"title"},"Email address"),o.a.createElement("br",null),o.a.createElement("input",{className:"input",value:this.state.email,onChange:this.handleChange,type:"email",name:"email",placeholder:"Enter email"})),o.a.createElement("div",null,o.a.createElement("label",{className:"title"},"Password"),o.a.createElement("br",null),o.a.createElement("input",{className:"input",value:this.state.password,onChange:this.handleChange,type:"password",name:"password",placeholder:"Password"})),o.a.createElement("button",{className:"button",type:"submit",onClick:this.login},"Login")),o.a.createElement("p",{className:"title"},"Not a member?"),o.a.createElement(R.a,{className:"popup-box",id:"signup-box",trigger:o.a.createElement("button",{className:"button"},"Sign Up"),position:"center"},o.a.createElement("div",null,o.a.createElement("form",{className:"sign-form"},o.a.createElement("div",null,o.a.createElement("label",{className:"label-form"},"User Name"),o.a.createElement("br",null),o.a.createElement("input",{className:"input-pop",value:this.state.userName,onChange:this.handleChange,type:"name",name:"userName",placeholder:"Create a user name"}),o.a.createElement("label",{className:"label-form"},"Email address"),o.a.createElement("br",null),o.a.createElement("input",{className:"input-pop",value:this.state.email,onChange:this.handleChange,type:"email",name:"email",placeholder:"Enter email"})),o.a.createElement("div",null,o.a.createElement("label",{className:"label-form"},"Password"),o.a.createElement("br",null),o.a.createElement("input",{className:"input-pop",value:this.state.password,onChange:this.handleChange,type:"password",name:"password",placeholder:"Password"})),o.a.createElement("br",null),o.a.createElement("button",{className:"button",onClick:this.signup},"Sign Up")),o.a.createElement("br",null))))}}]),t}(n.Component)),M=a(21),q=a.n(M),T=a(26),x=a(42),I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={value:""},a._handleChange=a._handleChange.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"_handleChange",value:function(e){this.setState({value:e.target.value}),"normal"===e.target.value?this.props.sequenceSelect([],"Sine Synth Sequencer","normal"):"empty"===e.target.value&&this.props.sequenceSelect(!1,"","")}},{key:"render",value:function(){return o.a.createElement("select",{className:"select-menu",onChange:this._handleChange,value:this.state.value},o.a.createElement("option",{value:"empty"},"Select A Sequencer"),o.a.createElement("option",{value:"normal"},"Sine Synth Sequencer"))}}]),t}(n.Component),L=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={roomName:"",sequName:"",selectedRows:!1,type:"",redirectLink:""},e._handleSubmit=e._handleSubmit.bind(Object(m.a)(e)),e._handleName=e._handleName.bind(Object(m.a)(e)),e._handleSequ=e._handleSequ.bind(Object(m.a)(e)),e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"_handleName",value:function(e){this.setState({roomName:e.target.value})}},{key:"_handleSequ",value:function(e,t,a){this.setState({sequName:t,selectedRows:e,type:a})}},{key:"getPassword",value:function(){return Object(x.a)(Array(6)).map(function(e){return(~~(36*Math.random())).toString(36)}).join("").toUpperCase()}},{key:"_handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.selectedRows){var a=v.auth().currentUser.uid,n=this.getPassword(),o=this.state.roomName,s=[];Promise.all(["CLAP","CLOSEDHAT","SNARE","COWBELL","CYMBAL","KICK","OPENHIHAT","RIMSHOT"].map(function(){var e=Object(T.a)(q.a.mark(function e(t){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.firestore().collection("row").add({instrument:t,tone:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]}).then(function(e){s.push(e.id)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())).then(function(){v.firestore().collection("sequencer").add({name:"Drum Sequencer",rows:s}).then(function(e){var s=e.id;v.firestore().collection("synthesiser").add({name:t.state.sequName,row0:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],row1:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],row2:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],row3:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],row4:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],row5:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],row6:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],scale:"major",octave:"4",root:"C",type:t.state.type,chorus:"0",reverb:"0",delay:"0",volume:"-12"}).then(function(e){v.firestore().collection("room").add({name:o,tempo:"90",swing:"0",collaborators:[a],sequencers:[s,e.id],password:n}).then(function(e){var n=e.id;v.firestore().collection("user").doc(a).get().then(function(e){var o=e.data().rooms.slice();o.push(n),v.firestore().collection("user").doc(a).update({rooms:o}).then(function(){t.setState({redirectLink:n})})})})})})}),this.setState({roomName:"",sequName:"",selectedRows:!1,type:!1})}}},{key:"render",value:function(){return""!==this.state.redirectLink?o.a.createElement(p.a,{to:"/".concat(this.state.redirectLink)}):o.a.createElement("div",null,o.a.createElement("form",{className:"form-style",onSubmit:this._handleSubmit},o.a.createElement("label",{id:"room-name"},"Room Name"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("input",{className:"input-home",type:"text",onChange:this._handleName,value:this.state.roomName}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("label",null,"Drum Sampler added by Default"),o.a.createElement("br",null),o.a.createElement("label",null,"Choose Starting Sequencer"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(I,{sequenceSelect:this._handleSequ}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("input",{className:"button",type:"submit"})))}}]),t}(n.Component),P=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e));var n=v.auth().currentUser;return a.state={roomName:"",password:"",redirectLink:"",uid:n.uid},a._handleName=a._handleName.bind(Object(m.a)(a)),a._handlePassword=a._handlePassword.bind(Object(m.a)(a)),a._handleSubmit=a._handleSubmit.bind(Object(m.a)(a)),a.joinRoom=a.joinRoom.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"_handleName",value:function(e){this.setState({roomName:e.target.value})}},{key:"_handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"_handleSubmit",value:function(e){var t=this;e.preventDefault(),v.firestore().collection("room").get().then(function(e){e.docs.forEach(function(e){e.data().name===t.state.roomName&&e.data().password===t.state.password&&t.joinRoom(e.id,e.data().collaborators)})})}},{key:"joinRoom",value:function(e,t){var a=this.state.uid;if(t.includes(a))this.setState({redirectLink:e});else{var n=t.slice();n.push(a),v.firestore().collection("room").doc(e).update({collaborators:n}).then(function(){v.firestore().collection("user").doc(a).get().then(function(t){var n=t.data().rooms.slice();n.push(e),v.firestore().collection("user").doc(a).update({rooms:n})})})}}},{key:"render",value:function(){if(this.state.redirectLink){var e="/"+this.state.redirectLink;return o.a.createElement(p.a,{to:e})}return o.a.createElement("form",{className:"form-style"},o.a.createElement("label",null,"Room Name"),o.a.createElement("input",{type:"text",className:"input-home",onChange:this._handleName,value:this.state.roomName}),o.a.createElement("br",null),o.a.createElement("label",null,"Pin Code"),o.a.createElement("input",{type:"text",className:"input-home",onChange:this._handlePassword,value:this.state.password}),o.a.createElement("input",{type:"submit",className:"button",onClick:this._handleSubmit,value:"Join Room"}))}}]),t}(n.Component),U=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={roomIDs:[],rooms:[]},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=v.auth().currentUser.uid;v.firestore().collection("user").doc(t).get().then(function(t){e.setState({roomIDs:t.data().rooms}),e.generateLinks()})}},{key:"generateLinks",value:function(){var e=this,t=this.state.roomIDs,a=[];Promise.all(t.map(function(){var e=Object(T.a)(q.a.mark(function e(t){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.firestore().collection("room").doc(t).get().then(function(e){a.push(o.a.createElement("p",null,o.a.createElement(d.b,{className:"",to:"/".concat(e.id)},e.data().name)))});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())).then(function(){e.setState({rooms:a})})}},{key:"render",value:function(){return o.a.createElement("div",{className:"form-style"},this.state.rooms)}}]),t}(n.Component),B=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e)),g.a.Transport.stop(),g.a.Transport.cancel(),a.userNameShorten=a.userNameShorten.bind,a.logout=a.logout.bind(Object(m.a)(a));var n=v.auth().currentUser;return a.state={userName:n.displayName,email:n.email,roomForm:!1,roomLinks:!1,joinRoom:!1},a._onCreate=a._onCreate.bind(Object(m.a)(a)),a._onJoin=a._onJoin.bind(Object(m.a)(a)),a._onCollab=a._onCollab.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"logout",value:function(){v.auth().signOut()}},{key:"userNameShorten",value:function(e){var t=v.auth().currentUser,a=this.state.userName;return t&&a.charAt(0).toUpperCase(),a}},{key:"_onCreate",value:function(){this.setState({roomForm:!0,roomLinks:!1,joinRoom:!1})}},{key:"_onJoin",value:function(){this.setState({roomForm:!1,roomLinks:!1,joinRoom:!0})}},{key:"_onCollab",value:function(){this.setState({roomForm:!1,roomLinks:!0,joinRoom:!1})}},{key:"render",value:function(){return o.a.createElement("div",{className:"background"},o.a.createElement("a",{href:"/#/profile/:user"},o.a.createElement("div",{className:"profile-link"},this.userNameShorten)),o.a.createElement("h1",{className:"mrow"},"Simple Studio"),o.a.createElement("br",null),o.a.createElement("div",{className:"container"},o.a.createElement("div",null),o.a.createElement("div",null,o.a.createElement("button",{onClick:this._onCreate,className:"box-button"},"Create"),o.a.createElement("br",null),o.a.createElement("button",{onClick:this._onJoin,className:"box-button"},"Join Room"),o.a.createElement("br",null),o.a.createElement("button",{onClick:this._onCollab,className:"box-button"},"Your Rooms")),this.state.roomForm?o.a.createElement(L,null):"",this.state.roomLinks?o.a.createElement(U,null):"",this.state.joinRoom?o.a.createElement(P,null):"",o.a.createElement("div",null)),o.a.createElement("button",{onClick:this.logout,className:"button"},"Logout"))}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(m.a)(a)),a.submit=a.submit.bind(Object(m.a)(a)),a.state={userName:"",email:"",password:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(E.a)({},e.target.name,e.target.value))}},{key:"submit",value:function(e){e.preventDefault();var t=v.auth().currentUser;t&&t.updateProfile({displayName:this.state.userName}).then(function(e){console.log("Update Successful")}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return o.a.createElement("div",{className:"background"},o.a.createElement("a",{href:"/#/"},o.a.createElement("div",{className:"profile-link"},"Home")),o.a.createElement("h1",{className:"mrow"},"Update Profile \xa0"),o.a.createElement("form",{className:"sign-form",onSubmit:this.submit},o.a.createElement("div",null,o.a.createElement("label",{className:"title"},"Change User Name"),o.a.createElement("br",null),o.a.createElement("input",{className:"input",value:this.state.userName,onChange:this.handleChange,type:"userName",name:"userName",placeholder:"User Name"})),o.a.createElement("div",null,o.a.createElement("label",{className:"title"},"Change Email address"),o.a.createElement("br",null),o.a.createElement("input",{className:"input",value:this.state.email,onChange:this.handleChange,type:"email",name:"email",placeholder:"Enter email"})),o.a.createElement("div",null,o.a.createElement("label",{className:"title"},"Change Password"),o.a.createElement("br",null),o.a.createElement("input",{className:"input",value:this.state.password,onChange:this.handleChange,type:"password",name:"password",placeholder:"Password"})),o.a.createElement("button",{className:"button",type:"submit"},"Update Profile")))}}]),t}(n.Component),J=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={user:null},e.authListener=e.authListener.bind(Object(m.a)(e)),e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"authListener",value:function(){var e=this;v.auth().onAuthStateChanged(function(t){t?(e.setState({user:t}),localStorage.setItem("user",t.uid)):(e.setState({user:null}),localStorage.removeItem("user"))})}},{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement("div",null,this.state.user?o.a.createElement(p.d,null,o.a.createElement(p.b,{path:"/profile/:user",component:F}),",",o.a.createElement(p.b,{exact:!0,path:"/",component:B}),",",o.a.createElement(p.b,{path:"/profile/:user",component:F}),",",o.a.createElement(p.b,{path:"/:room",component:_})):o.a.createElement(p.d,null,o.a.createElement(p.b,{exact:!0,path:"/",component:A}),",",o.a.createElement(p.a,{from:"/:room",to:"/"}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,1,2]]]);
//# sourceMappingURL=main.35c37f95.chunk.js.map